[
    {
        "type" : "emr_serverless",
        "run_name": "emrs_convert_fullyear_6executors",
        "script_name": "emrserverless_scripts/convert_to_parquet.py",
        "arguments": [
            "{s3_bucket}",
            "nyc_rides_2022_csv/",
            "output/emrs_convert_fullyear/6w/"
        ],
        "sparkSubmitParameters": {
            "spark.hadoop.hive.metastore.client.factory.class": "com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory",
            "spark.executor.instances" : "6",
            "spark.dynamicAllocation.initialExecutors" : "6",
            "spark.dynamicAllocation.maxExecutors" : "6",
            "spark.executor.cores" : "4",
            "spark.executor.memory" : "16G"
        }
    },
    {
        "type" : "emr_serverless",
        "run_name": "emrs_convert_fullyear_2executors",
        "script_name": "emrserverless_scripts/convert_to_parquet.py",
        "arguments": [
            "{s3_bucket}",
            "nyc_rides_2022_csv/",
            "output/emrs_convert_fullyear/2w/"
        ],
        "sparkSubmitParameters": {
            "spark.hadoop.hive.metastore.client.factory.class": "com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory",
            "spark.executor.instances" : "2",
            "spark.dynamicAllocation.initialExecutors" : "2",
            "spark.dynamicAllocation.maxExecutors" : "2",
            "spark.executor.cores" : "4",
            "spark.executor.memory" : "16G"
        }
    },
    {
        "type" : "emr_serverless",
        "run_name": "emrs_convert_fullyear_auto",
        "script_name": "emrserverless_scripts/convert_to_parquet.py",
        "arguments": [
            "{s3_bucket}",
            "nyc_rides_2022_csv/",
            "output/emrs_convert_fullyear/auto/"
        ],
        "sparkSubmitParameters": {
            "spark.hadoop.hive.metastore.client.factory.class": "com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"
        }
    },    
    {
        "type" : "glue",
        "run_name": "glue_convert_fullyear_6workers",
        "script_name": "glue_scripts/convert_to_parquet.py",
        "job_name" : "gluej-runner-6-workers",
        "arguments" : {
            "--s3_bucket_name" : "{s3_bucket}",
            "--input_path" : "nyc_rides_2022_csv/",
            "--output_path" : "output/glue_convert_fullyear/6w/"
        }
    },
    {
        "type" : "glue",
        "run_name": "glue_convert_fullyear_2workers",
        "script_name": "glue_scripts/convert_to_parquet.py",
        "job_name" : "gluej-runner-2-workers",
        "arguments" : {
            "--s3_bucket_name" : "{s3_bucket}",
            "--input_path" : "nyc_rides_2022_csv/",
            "--output_path" : "output/glue_convert_fullyear/2w/"
        }
    },
    {
        "type" : "glue",
        "run_name": "glue_convert_fullyear_auto",
        "script_name": "glue_scripts/convert_to_parquet.py",
        "job_name" : "gluej-runner-auto-scale",
        "arguments" : {
            "--s3_bucket_name" : "{s3_bucket}",
            "--input_path" : "nyc_rides_2022_csv/",
            "--output_path" : "output/glue_convert_fullyear/auto/"
        }
    }        
]